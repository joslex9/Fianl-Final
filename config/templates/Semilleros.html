<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <title>Tabla con Bootstrap</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link rel="stylesheet" href="../static/css/style.css">
   
</head>

<body>


    <header>
        <img class="logo" src="../static/img/escudo.png" alt="Logo universidad" id="logo">
        <h1 class="encabezado">SEGUIMIENTO DE SEMILLERO</h1>
    
    </header>

    <ul>
        <div class="palabra"></div>
        <div class="linea"></div>
    </ul>
    
    <div id="pof">
        <div class="container mt-4 text-center">
            <label for="informacionGeneral" class="centrar-texto negrita">INFORMACION GENERAL</label>
            <hr>
            <form>
                <div class="form-group row">
                    <label for="staticFacultad" class="col-sm-2 col-form-label">Facultad:</label>
                    <div class="col-sm-4">
                        <input type="text" readonly class="form-control-plaintext" id="staticFacultad" value="">
                    </div>
                    <label for="staticFecha" class="col-sm-2 col-form-label">Fecha:</label>
                    <div class="col-sm-4">
                        <input type="text" readonly class="form-control-plaintext" id="staticFecha" value="22/11/2023">
                    </div>
                </div>
            </form>
            <hr>
    
            <div class="form-group row">
                <label for="staticPrograma" class="col-sm-2 col-form-label">Programa:</label>
                <div class="col-sm-10">
                    <input type="text" readonly class="form-control-plaintext" id="staticPrograma" value="">
                </div>
            </div>
            <hr>
    
            <div class="form-group row">
                <label for="staticNombreI" class="col-sm-2 col-form-label">Nombre del grupo de investigacion:</label>
                <div class="col-sm-10">
                    <input type="text" readonly class="form-control-plaintext" id="staticNombreI" value="">
                </div>
            </div>
            <hr>
    
            <form>
                <div class="form-group row">
                    <label for="staticNombreS" class="col-sm-2 col-form-label">Nombre del semillero:</label>
                    <div class="col-sm-4">
                        <input type="text" readonly class="form-control-plaintext" id="staticNombreS" value="">
                    </div>
                    <label for="staticPeriodoA" class="col-sm-2 col-form-label">Periodo Academico:</label>
                    <div class="col-sm-4">
                        <input type="text" readonly class="form-control-plaintext" id="staticPeriodoA" value="2023-2">
                    </div>
                </div>
            </form>
            <hr>
    
            <div class="form-group row">
                <label for="staticDocenteL" class="col-sm-2 col-form-label">Docente lider del semillero:</label>
                <div class="col-sm-10">
                    <input type="text" readonly class="form-control-plaintext" id="staticDocenteL" value="">
                </div>
            </div>
            <hr>
    
            <div class="form-group row">
                <label for="staticLineaI" class="col-sm-2 col-form-label">Linea de investigacion:</label>
                <div class="col-sm-10">
                    <input type="text" readonly class="form-control-plaintext" id="staticLineaI" value="">
                </div>
            </div>
    
            <hr>
    
            <form>
                <div class="form-group row">
                    <label for="staticCategoriaC" class="col-sm-2 col-form-label">Categoria Colciencias:</label>
                    <div class="col-sm-4">
                        <input type="text" readonly class="form-control-plaintext" id="staticCategoriaC" value="">
                    </div>
                    <label for="staticCodigoCol" class="col-sm-2 col-form-label">Codigo Colciencias:</label>
                    <div class="col-sm-4">
                        <input type="text" readonly class="form-control-plaintext" id="staticCodigoCol" value="">
                    </div>
                </div>
            </form>
            <hr>
    
            <div class="container">
                <label for="presentacionInforme" class="centrar-texto negrita">PRESENTACIÓN DE INFORME DE RESULTADOS (USO EXCLUSIVO DEL GRUPO DE INVESTIGACIÓN)</label>
                <hr>
            </div>
    
            <table id="tablaProyectos" class="table table-striped mt-4">
                <thead>
                    <tr>
                        <th>Nombre del proyecto </th>
                        <th>Objetivos del Proyecto</th>
                        <th>Resultados Obtenidos</th>
                        <th> Estudiantes que intervienen</th>
                    </tr>
                </thead>
                <tbody>
    
                </tbody>
            </table>
    
            <hr>
    
            <div class="form-group row">
                <label for="staticObservaciones" class="col-sm-2 col-form-label">Observaciones:</label>
                <br>
                <label for="seguimientoSemilleros" class="centrar-texto negrita">SEGUIMIENTO DE LA ACTIVIDAD INVESTIGATIVA DE SEMILLEROS DE INVESTIGACIÓN</label>
                <br>
                <label for="observacionesGenerales" class="centrar-texto negrita">Observaciones generales</label>
                <hr>
                <br>
                <br>
                <br>
                <hr>
                <label for="usoExclusivoLiderGrupo" class="centrar-texto negrita">USO EXCLUSIVO LÍDER DEL GRUPO</label>
                <br>
                <hr>
                <form>
                    <div class="form-group row">
                        <label for="staticNS" class="col-sm-2 col-form-label">Firma docente lider del semillero:</label>
                        <div class="col-sm-4">
                            <input type="text" readonly class="form-control-plaintext" id="staticNS" value="">
                        </div>
                        <label for="staticPA" class="col-sm-2 col-form-label">Manifiesto la veracidad de toda la información contemplada en el presente documento en concordancia con los requisitos solicitados y en beneficio de la Universidad Libre</label>
                        <div class="col-sm-4">
                            <input type="text" readonly class="form-control-plaintext" id="staticPA" value="">
                        </div>
                    </div>
                </form>
                <hr>
                <label for="usoExclusivoCentroInvestigaciones" class="centrar-texto negrita">USO EXCLUSIVO DEL CENTRO DE INVESTIGACIONES DE FACULTAD</label>
                <br>
                <hr>
                <label for="registroTramite" class="centrar-texto negrita">Registro del tramite</label>
                <hr>
            </div>
    
            <label for="validacionTramite" class="col-sm-2 col-form-label">Validacion del tramite:</label>
    
            <div class="form-group row">
                <label for="staticGrupoI" class="col-sm-2 col-form-label">Nombre:</label>
                <div class="col-sm-10">
                    <input type="text" readonly class="form-control-plaintext" id="staticGrupoI" value="">
                </div>
    
                <label for="staticGrupoII" class="col-sm-2 col-form-label">Fecha:</label>
                <div class="col-sm-10">
                    <input type="text" readonly class="form-control-plaintext" id="staticGrupoII" value="">
                </div>
                <label for="firmaGrupo" class="col-sm-2 col-form-label">Firma:</label>
            </div>
        </div>
    </div>
    




   <div class="center-container">
    <button id="consultarProyectos" class="btn btn-primary">Consultar proyectos</button>
    <button id="regresar" class="btn btn-primary">Regresar</button>
    <button id="pdff" class="imprimir-btn">
        <img  class="impresora" onclick="generarPDF()" src="../static/img/Descargar.png" alt="Impresora"    > PDF
    </button>
   </div>

   <script>
    function generarPDF() {
        // Selecciona el elemento que deseas convertir a PDF
        const elementoParaConvertir = document.getElementById('pof');

        // Opciones de configuración para html2pdf
        const opciones = {
            margin: 10,
            filename: 'documento.pdf',
            image: { type: 'jpeg', quality: 0.98 },
            html2canvas: { scale: 2 },
            jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
        };

        // Utiliza html2pdf para convertir el contenido a PDF
        html2pdf(elementoParaConvertir, opciones);
    }
</script>




  
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
    
    

   

    <script>
        document.getElementById("consultarProyectos").addEventListener("click", function () {
            let endpoint = '/Detalle2';


            // Recuperar el códigoSemillero almacenado en sessionStorage
            var codigoSemillero = sessionStorage.getItem('codigoSemillero');
            var codigo2 = codigoSemillero;
            // Recuperar el códigoSemillero almacenado en sessionStorage
            var facultadSemillero = sessionStorage.getItem('facultadSemillero');
            document.getElementById("staticFacultad").value = facultadSemillero;
            //   console.log("enviado a axius" + codigoSemillero);
            var nombreSemillero = sessionStorage.getItem('nombreSemillero');
            var programaSemillero = sessionStorage.getItem('programaSemillero');
            document.getElementById("staticPrograma").value = programaSemillero;
            axios.get(endpoint + '?idSemillero=' + encodeURIComponent(codigoSemillero))
                .then(function (response) {
                    let data = response.data;
                    let tablaProyectos = document.getElementById("tablaProyectos").getElementsByTagName("tbody")[0];

                    // Limpia el contenido actual de la tabla
                    tablaProyectos.innerHTML = '';


                    // Itera a través de los datos y agrega filas a la tabla
                    for (let j = 0; j < data.Proyectos.length; j++) {
                        let row = tablaProyectos.insertRow();
                        let cellNombre = row.insertCell(0);
                        let cellObjetivos = row.insertCell(1);
                        let cellResultadosOb = row.insertCell(2);
                        let cellEstudiantes = row.insertCell(3);

                        let proyecto = data.Proyectos[j];

                        // Areggar la lista a la tabla 
                        console.log(proyecto);

                        cellNombre.textContent = proyecto.nombreProyecto;

                    }
                     // Itera a través de los datos y agrega filas a la tabla
                     for (let j = 0; j < data.Objetivos.length; j++) {
                        let row = tablaProyectos.insertRow();
                        let cellNombre = row.insertCell(0);
                        let cellObjetivos = row.insertCell(1);
                        let cellResultadosOb = row.insertCell(2);
                        let cellEstudiantes = row.insertCell(3);

                        let objetivos = data.Objetivos[j];

                        // Areggar la lista a la tabla 
                        console.log(objetivos);

                        cellObjetivos.textContent = objetivos.descripcion;

                    }

                    // Itera a través de los datos y agrega filas a la tabla
                    for (let i = 0; i < data.ResultadosOb.length; i++) {
                        let row = tablaProyectos.insertRow();
                        let cellNombre = row.insertCell(0);
                        let cellObjetivos = row.insertCell(1);
                        let cellResultadosOb = row.insertCell(2);
                        let cellEstudiantes = row.insertCell(3);
                        // Acceder a las listas desde el objeto "data"
                        let resultadosOb = data.ResultadosOb[i];


                        // Areggar las listas a la tabla 
                        console.log(resultadosOb);
                        cellResultadosOb.textContent = resultadosOb.descripcionOb;


                    }


                    // Itera a través de los datos y agrega filas a la tabla
                    for (let i = 0; i < data.Estudiantes.length; i++) {
                        let row = tablaProyectos.insertRow();
                        let cellNombre = row.insertCell(0);
                        let cellObjetivos = row.insertCell(1);
                        let cellResultadosOb = row.insertCell(2);
                        let cellEstudiantes = row.insertCell(3);

                        // Acceder a las listas desde el objeto "data"
                        let estudiante = data.Estudiantes[i];


                        // Areggar las listas a la tabla 
                        console.log(estudiante);
                        cellEstudiantes.textContent = estudiante.nombre;


                    }

                    //Grupo de investigacion
                    let endpoint2 = '/getGrupoI';
                    //Cargar GInvestigacion
                    axios.get(endpoint2 + '?idSemillero=' + encodeURIComponent(codigoSemillero))
                        // console.log("enviado 2 " + codigoSemillero)
                        .then(function (response2) {
                            let data2 = response2.data;
                            // Llenar la información de la facultad en el campo facultad
                            //  document.getElementById("staticFacultad").value = data2.idSemilleroFk;
                            document.getElementById("staticNombreI").value = data2.nombre;
                            document.getElementById("staticNombreS").value = nombreSemillero;
                            document.getElementById("staticDocenteL").value = data2.lider;
                            document.getElementById("staticLineaI").value = data2.lineaInvestigacion;
                            document.getElementById("staticCategoriaC").value = data2.categoriaColciencias;
                            document.getElementById("staticCodigoCol").value = data2.codigoColciencias;


                            //Cargar Poryectos 


                        })
                        .catch(function (error) {
                            console.log(error);
                        });



                })
                .catch(function (error) {
                
                    if (error.response) {
                        // La solicitud fue realizada, pero el servidor respondió con un código de estado fuera del rango 2xx
                        console.error("Respuesta del servidor:", error.response.data);
                        console.error("Código de estado HTTP:", error.response.status);
                        console.error("Encabezados de respuesta:", error.response.headers);
                    } else if (error.request) {
                        // La solicitud fue realizada, pero no se recibió ninguna respuesta
                        console.error("No se recibió respuesta del servidor:", error.request);
                    } else {
                        // Algo sucedió en la configuración de la solicitud que desencadenó un error
                        console.error("Configuración de la solicitud:", error.message);
                    }
                });
        });
        //Regresar
        document.getElementById("regresar").addEventListener("click", function () {
            // Redirigir a otra página Semilleros HTML
            window.location.href = '/';
        });

    </script>
    <!-- <script src="../static/js/scrip.js"></script> -->
    <script src="https://rawgit.com/eKoopmans/html2pdf/master/dist/html2pdf.bundle.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
   

</body>

</html>